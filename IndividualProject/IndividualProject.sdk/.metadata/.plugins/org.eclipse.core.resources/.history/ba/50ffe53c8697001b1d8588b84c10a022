/*
 * gpois.c
 *
 *  Created on: Apr 7, 2021
 *      Author: sebastian
 */

#include "gpios.h"

/*
 * 	Examples of use
 */

/*




*/


/*
 * 	Functions
 */

// Initialize PL GPIO
u8 initXGpio(u8 deviceID) {
	u8 status;

	GpioConfigPtr[deviceID] = XGpio_LookupConfig(deviceID);
	if (GpioConfigPtr[deviceID] == (XGpio_Config *) NULL) {
		xil_printf("GPIO Config lookup failed");
		return XST_FAILURE;
	}

	// Initialize XADC from configuration
	status = XGpio_CfgInitialize(&Gpio[deviceID], GpioConfigPtr[deviceID], GpioConfigPtr[deviceID]->BaseAddress);
	if (status != XST_SUCCESS) {
		xil_printf("GPIO Initialization failed");
		return XST_FAILURE;
	}

	// Do selftest of BRAM module to check that it's functional
	status = XGpio_SelfTest(&Gpio[deviceID]);
	if (status != XST_SUCCESS) {
		xil_printf("GPIO Selftest failed");
		return XST_FAILURE;
	}

	return XST_SUCCESS;
}
