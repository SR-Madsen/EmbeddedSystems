/*
 * led_matrix.c
 *
 *  Created on: Mar 24, 2021
 *      Author: Sebastian
 */

// Functions

uint8_t initLedMatrix(uint8_t deviceID) {
	BramConfigPtr = XBram_LookupConfig(deviceID);
	if (BramConfigPtr == (XBram_Config *) NULL) {
		xil_printf("Config lookup failed");
		return XST_FAILURE;
	}

	// Initialize BRAM from configuration
	Status = XBram_CfgInitialize(&Bram, ConfigPtr, ConfigPtr->CtrlBaseAddress);
	if (Status != XST_SUCCESS) {
		xil_printf("Initialization failed");
		return XST_FAILURE;
	}

	// Do selftest of BRAM module to check that it's functional
	Status = XBram_SelfTest(&Bram, 0);
	if (Status != XST_SUCCESS) {
		xil_printf("Selftest failed");
		return XST_FAILURE;
	}

	return XST_SUCCESS;
}

